<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Stopwatch Web Application</title>
  <link rel="stylesheet" href="sw.css" />
</head>
<body>
  <div class="stopwatch">
    <div class="timer" id="display">00:00:00:00</div>
    <div class="controls">
      <button id="startBtn">Start</button>
      <button id="pauseBtn" disabled>Pause</button>
      <button class="reset" id="resetBtn" disabled>Reset</button>
      <button class="lap" id="lapBtn" disabled>Lap</button>
    </div>
    <div class="laps" id="laps"></div>
  </div>
  <script>
    let startTime, elapsed = 0, intervalId, running = false, laps = [];

    const display = document.getElementById('display');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const lapBtn = document.getElementById('lapBtn');
    const lapsDisplay = document.getElementById('laps');

    function formatTime(ms) {
      const cs = Math.floor((ms % 1000) / 10);
      const s = Math.floor((ms / 1000) % 60);
      const m = Math.floor((ms / 60000) % 60);
      const h = Math.floor(ms / 3600000);
      return (
        (h ? String(h).padStart(2, '0') + ':' : '') +
        String(m).padStart(2, '0') + ':' +
        String(s).padStart(2, '0') + '.' +
        String(cs).padStart(2, '0')
      );
    }

    function update() {
      const now = Date.now();
      const diff = now - startTime + elapsed;
      display.textContent = formatTime(diff);
    }

    startBtn.onclick = () => {
      if (!running) {
        running = true;
        startTime = Date.now();
        intervalId = setInterval(update, 10);
        startBtn.disabled = true;
        pauseBtn.disabled = false;
        resetBtn.disabled = false;
        lapBtn.disabled = false;
        
      }
    };

    pauseBtn.onclick = () => {
      if (running) {
        running = false;
        clearInterval(intervalId);
        elapsed += Date.now() - startTime;
        startBtn.disabled = false;
        pauseBtn.disabled = true;
        lapBtn.disabled = true;
      }
    };

    resetBtn.onclick = () => {
      clearInterval(intervalId);
      running = false;
      elapsed = 0;
      display.textContent = '00:00:00:00';
      startBtn.disabled = false;
      pauseBtn.disabled = true;
      resetBtn.disabled = true;
      lapBtn.disabled = true;
      laps = [];
      renderLaps();
    };

    lapBtn.onclick = () => {
      if (running) {
        const now = Date.now();
        const diff = now - startTime + elapsed;
        laps.push(formatTime(diff));
        renderLaps();
      }
    };

    function renderLaps() {
      if (laps.length === 0) {
        lapsDisplay.innerHTML = '';
        return;
      }
      let html = `<h3>Lap Times</h3>`;
      for (let i = laps.length - 1; i >= 0; i--) {
        html += `<div class="lap-item">Lap ${i + 1}: ${laps[i]}</div>`;
      }
      lapsDisplay.innerHTML = html;
    }
  </script>
</body>
</html>